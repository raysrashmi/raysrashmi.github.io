
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Rails 4 Directory Structure - Rashmi Yadav</title>
  <meta name="author" content="Rashmi Yadav">

  
  <meta name="description" content="rails 4 directory structure">
  <meta name="keywords" content="rails4, rails">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://raysrashmi.github.io/2013/07/09/rails4-directory-structure">
  <link href="/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Quicksand:300,400' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/raysrashmi" rel="alternate" title="Rashmi Yadav" type="application/atom+xml">
  <script src="/js/jquery.js"></script>
  <script src="/js/bootstrap-collapse.js"></script>
  <script src="/js/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/js/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-42359259-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <div class="navbar navbar-inverse navbar-static-top">
  	<div class="navbar-inner">
  	  <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-responsive-collapse">
          <span class="fui-menu-24"></span>
        </a>
  	  	<div class="nav-collapse collapse navbar-responsive-collapse" style="height:0;">
  	      <ul class="nav">
    
    <li >
    <a href="/">Home</a>
    </li>
    
    <li >
    <a href="/about">About</a>
    </li>
    
    <li >
    <a href="/blog/archives">Archives</a>
    </li>
    
</ul>

<ul class="nav pull-right">
    
    <li><a href="http://github.com/raysrashmi" title="Github Profile"><i class="icon-github-sign social-navbar"></i></a></li>
    
    
    
    <li><a href="http://twitter.com/raysrashmi" title="Twitter Profile"><i class="icon-twitter-sign social-navbar"></i></a></li>
    
    
    
    
    <li>
    <a href="http://feeds.feedburner.com/raysrashmi" rel="alternate" type="application/rss+xml" class='feed_burner'>
      <img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/>
    </a>
    </li>
    
</ul>

  	    </div>
  	  </div>
  	</div>
  </div>
  <div class="container" id="main">
    <div class="span12">
      <div class="row-fluid">
        <div id="content">
          <div>
<article class="hentry" role="article">
  

  <header>
  <div class="jumbotron">
    Rails 4 Directory Structure
	<h5>








  


<i class="icon-calendar-empty"></i> <time datetime="2013-07-09T00:00:00+02:00" pubdate data-updated="true">Jul 9<span>th</span>, 2013</time></h5>
  </div>
</header>

<div class="span6 social-sharing">
  
<a class="twitter-share-button" href="https://twitter.com/share" data-via="raysrashmi" data-text="Rails 4 Directory Structure" >
  Tweet
</a>
<script type="text/javascript">
  (function(){
    var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
  })();
</script>


</div>

  <div class="row-fluid">
    <div class="span12">
      <p><img src="http://farm6.staticflickr.com/5443/9241313505_ac035bd643_m_d.jpg"></p>

<p>Rails 4 is released. Lots of new features has been added to rails.
Here we will see what new directories have been added.</p>

<p>  We will create a sample app in rails 4 so that it will be easy to see the new structure.
  I am assuming  you have updated your rails.
  To check current version of rails run following command:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">rails</span> <span class="o">-</span><span class="n">v</span>
</span></code></pre></td></tr></table></div></figure>


<p>  It should be Rails 4.0.0</p>

<!--more-->


<p>  Now create a very simple rails application</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">rails</span> <span class="kp">new</span>  <span class="n">blog</span>
</span></code></pre></td></tr></table></div></figure>


<p>  It creates a our app directory . You will see there are some new directories and files.
  Lets go to each one by one</p>

<h2>app/</h2>

<p>  In this directory there is new <b>concerns/</b> dir under controllers/ and models/.
  <a href='http://37signals.com/svn/posts/3372-put-chubby-models-on-a-diet-with-concerns'>Concerns</a>
  are added to manage your models/controllers in a better way .</p>

<p>  Mixins and modules code can be put under this dir.
  Lets say in our blog application we have user model and post model and we require to add comments for both model
  so we created a commentable module in our concerns/ dir and included in both model.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">module</span> <span class="nn">Commentable</span>
</span><span class='line'>    <span class="kp">extend</span> <span class="ss">ActiveSupport</span><span class="p">:</span><span class="ss">:Concern</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">comments</span>
</span><span class='line'>      <span class="n">comments</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:text</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class='line'>    <span class="kp">include</span> <span class="no">Commentable</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class='line'>    <span class="kp">include</span> <span class="no">Commentable</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>  Now suppose we need to add one more module noteable to our model post.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">module</span> <span class="nn">Noteable</span>
</span><span class='line'>    <span class="kp">extend</span> <span class="ss">ActiveSupport</span><span class="p">:</span><span class="ss">:Concern</span>
</span><span class='line'>    <span class="n">included</span> <span class="k">do</span>
</span><span class='line'>      <span class="n">has_many</span> <span class="ss">:notes</span>
</span><span class='line'>      <span class="n">validated</span> <span class="ss">:note</span><span class="p">,</span> <span class="ss">presence</span><span class="p">:</span> <span class="kp">true</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class='line'>    <span class="kp">include</span> <span class="no">Commentable</span>
</span><span class='line'>    <span class="kp">include</span> <span class="no">Noteable</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>But we can also include Commentable to Noteable.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">module</span> <span class="nn">Noteable</span>
</span><span class='line'>  <span class="kp">extend</span> <span class="ss">ActiveSupport</span><span class="p">:</span><span class="ss">:Concern</span>
</span><span class='line'>  <span class="kp">include</span> <span class="no">Commentable</span>
</span><span class='line'>  <span class="n">included</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">has_many</span> <span class="ss">:notes</span>
</span><span class='line'>    <span class="n">validated</span> <span class="ss">:note</span><span class="p">,</span> <span class="ss">presence</span><span class="p">:</span> <span class="kp">true</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class='line'>  <span class="kp">include</span> <span class="no">Noteable</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Because of line &ldquo;extend ActiveSupport::Concern
&rdquo; both Commentable and Noteable are accessible for Post class.</p>

<p>Its easy to cross sharing of code among models and to make your model clean.</p>

<h2>bin/</h2>

<p>App executables bundle, rails and rake are under this dir. So dont need to run &lsquo;bundle exec&rsquo; before any rails command.
<a href='https://github.com/sstephenson/rbenv/wiki/Understanding-binstubs'>Binstubs</a> can also be generated using bundle command ,bundle 1.3 added spports for generating binstubs.
What Binstubs are executables required to prepare the environment before original executable.</p>

<p>When we do</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">gem</span> <span class="n">install</span> <span class="n">cucumber</span>
</span></code></pre></td></tr></table></div></figure>


<p>an executable file is genearted in gems//cucumber-1.3.2/bin dir(i am using rvm here)</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">~</span><span class="sr">/.rvm/</span><span class="n">gems</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">3</span><span class="o">-</span><span class="n">p448</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cucumber</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="mi">3</span><span class="o">.</span><span class="mi">2</span><span class="o">/</span><span class="n">bin</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now we can generate using bundle command</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'> <span class="n">bundle</span> <span class="n">binstubs</span> <span class="n">cucumber</span>
</span></code></pre></td></tr></table></div></figure>


<p>It wil genrate executable in bin/. Having executables within your app ensures that they are using app ruby and gems.</p>

<h2>initializers/filter_parameter_logging.rb</h2>

<p>We use config.filter_parameters in config/application.rb to filter out parameters which we dont want to show in log files.
But Its moved to filter_parameter_logging.rb under initializers dir</p>

<p>Lets say we have an attribute customer_id of customer model and we want to filter in our log files then just write</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Rails</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">filter_parameters</span> <span class="o">+=</span> <span class="o">[</span><span class="ss">:customer_id</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>After restarting your server if there is any request having customer_id parameter.
it will not show the value of customer_id
<img src="http://farm6.staticflickr.com/5347/9236715843_335affed17_b.jpg"></p>

<h2>doc/</h2>

<p>Doc has been removed from rails directory.
Its is extracted in <a href='https://github.com/voloko/sdoc/'>sdoc</a> gem and added to Gemfile by default so still you can generate docs by running following rake task</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">bundle</span> <span class="nb">exec</span> <span class="n">rake</span> <span class="ss">doc</span><span class="p">:</span><span class="n">rails</span>
</span></code></pre></td></tr></table></div></figure>


<h2>script/</h2>

<p>It has been removed and rails executable is moved to bin/ dir</p>

<h2>test/</h2>

<p>This directory has been changed quite a bit.</p>

<ul>
<li><p>Now we have controllers and models in place of functionals and units</li></p></li>
<li><p>We also have helpers and mailers dir under test by default</li></p></li>
</ul>


<p>Performance test has been extracted to a new <a href='https://github.com/rails/rails-perftest'>Gem</a>. So performance dir is not under test by default</p>

<p>Corresponding rake task for test has also changed &ndash;:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">rake</span> <span class="nb">test</span><span class="ss">:controllers</span>
</span><span class='line'><span class="n">rake</span> <span class="nb">test</span><span class="ss">:models</span>
</span><span class='line'><span class="n">rake</span> <span class="nb">test</span><span class="ss">:helpers</span>
</span><span class='line'><span class="n">rake</span> <span class="nb">test</span><span class="ss">:mailers</span>
</span></code></pre></td></tr></table></div></figure>


<h2>vendor/</h2>

<p>Rails plugins are already gone away so this dir is no more needed.</p>

<h2>scaffold</h2>

<p>   Our favorite rails command &lsquo;scaffold&rsquo; gives us few new files.
Lets create new scaffold</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">rails</span> <span class="n">generate</span> <span class="n">scaffold</span> <span class="n">list</span> <span class="ss">title</span><span class="p">:</span><span class="n">string</span>
</span></code></pre></td></tr></table></div></figure>


<p>You will see there are two new files</p>

<ul>
<li>index.json.builder</li>
<li>show.json.builder</li>
</ul>


<p>These files can be used for responding data in JSON format.
These are generated by <a href='https://github.com/rails/jbuilder'>jbuilder</a>
<a href='http://rubygems.org/'>Gem</a>. It is included in Gemfile by default.</p>

<h3>Wrap up</h3>

<p>I hope this post will be useful for you. If there is any mistake in this post
just let me know.</p>

<p>There is lot to learn about rails 4. If you want here are some links</p>

<ul>
<li><a href="http://railscasts.com/episodes/400-what-s-new-in-rails-4?view=asciicast">http://railscasts.com/episodes/400-what-s-new-in-rails-4?view=asciicast</a></li>
<li><a href="http://edgeguides.rubyonrails.org/4_0_release_notes.html">http://edgeguides.rubyonrails.org/4_0_release_notes.html</a></li>
</ul>


    </div>
  </div>



  <footer>
    <hr>
    
    <div class="row-fluid">
      
      <div class="span6">
        <p class="meta">
        
        


        </p>
      </div>
      
      <div class="span6 social-sharing">
        
<a class="twitter-share-button" href="https://twitter.com/share" data-via="raysrashmi" data-text="Rails 4 Directory Structure" >
  Tweet
</a>
<script type="text/javascript">
  (function(){
    var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
  })();
</script>


      </div>
      
      
    </div>
    
    <div class="row-fluid">
      <div class="span12">
        <p class="meta">
          
            <a class="basic-alignment left" href="/2013/04/06/the-basics-of-caching-and-cache-digestes/" title="Previous Post: The Basics of Caching and Cache Digests">&laquo; The Basics of Caching and Cache Digests</a>
          
          
            <a class="basic-alignment right" href="/2013/08/12/jquery-val-and-attr/" title="Next Post: jQuery attr('value') and val()">jQuery attr('value') and val() &raquo;</a>
          
        </p>
      </div>
    </div>
  </footer>
</article>

</div>



        </div>
      </div>
      <div class="row-fluid">
        <footer class="footer-page" role="contentinfo">
          <p>
  Copyright &copy; 2015 - Rashmi Yadav -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> - Theme by <a href="http://alexgaribay.com">Alex Garibay</a>
</p>


        </footer>
      </div>
    </div>
  </div>
  











</body>
</html>
